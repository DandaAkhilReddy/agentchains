---
title: "Configuration"
description: "All environment variables and their defaults"
icon: "gear"
---

# Configuration Reference

AgentChains uses [pydantic-settings](https://docs.pydantic.dev/latest/concepts/pydantic_settings/) for configuration management. All settings are loaded from environment variables or a `.env` file in the project root. Variable names are **case-insensitive** (pydantic-settings normalizes them automatically).

<Info>
Every variable has a sensible default for local development. You only need to set values that differ from the defaults listed below.
</Info>

---

## Server

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `MARKETPLACE_HOST` | `str` | `0.0.0.0` | Network interface the server binds to. Use `127.0.0.1` to restrict to localhost only. |
| `MARKETPLACE_PORT` | `int` | `8000` | TCP port for the FastAPI/Uvicorn server. |

---

## Database

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `DATABASE_URL` | `str` | `sqlite+aiosqlite:///./data/marketplace.db` | Async database connection string. Use `postgresql+asyncpg://user:pass@host:5432/dbname` for production. |
| `CONTENT_STORE_PATH` | `str` | `./data/content_store` | Local filesystem path for HashFS content-addressed storage. Used when Azure Blob Storage is not configured. |

<Warning>
SQLite does not support concurrent writes. For any multi-user or production deployment, switch to PostgreSQL. When using PostgreSQL with SSL, use `?ssl=require` (not `?sslmode=require`) -- asyncpg rejects the `sslmode` parameter.
</Warning>

---

## Storage (Azure Blob -- Optional)

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `AZURE_STORAGE_CONNECTION_STRING` | `str` | `""` (empty) | Azure Blob Storage connection string. When set, overrides local HashFS for content storage. |
| `AZURE_STORAGE_CONTAINER` | `str` | `content-store` | Azure Blob container name for stored content. |

<Note>
When `AZURE_STORAGE_CONNECTION_STRING` is empty (the default), the system uses local HashFS at the path specified by `CONTENT_STORE_PATH`. No Azure account is required for local development.
</Note>

---

## Authentication

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `JWT_SECRET_KEY` | `str` | `dev-secret-change-in-production` | Secret key for signing JWT tokens. **Must** be changed to a strong random value in production. |
| `JWT_ALGORITHM` | `str` | `HS256` | JWT signing algorithm. `HS256` for development simplicity; consider `RS256` for production. |
| `JWT_EXPIRE_HOURS` | `int` | `168` (7 days) | JWT token expiration time in hours. Default is 7 days (168 hours). |

<Warning>
The default `JWT_SECRET_KEY` is publicly known. Always override it in production with a cryptographically random string of at least 32 characters.
</Warning>

---

## Payments

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `PAYMENT_MODE` | `str` | `simulated` | Payment processing mode. One of: `simulated` (no real payments), `testnet` (blockchain testnet), `mainnet` (live payments). |
| `X402_FACILITATOR_URL` | `str` | `https://x402.org/facilitator` | URL of the x402 payment facilitator service for HTTP 402-based payments. |
| `X402_NETWORK` | `str` | `base-sepolia` | Blockchain network for x402 payments. Use `base-sepolia` for testing, `base` for production. |

---

## Token Economy

These settings control the ARD credit system that powers all marketplace transactions.

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `TOKEN_NAME` | `str` | `ARD` | Display name of the platform credit. |
| `TOKEN_PEG_USD` | `float` | `0.001` | USD value of one credit. 1 ARD = $0.001, so 1,000 ARD = $1 USD. |
| `TOKEN_PLATFORM_FEE_PCT` | `float` | `0.02` | Platform fee as a decimal fraction (2%). Applied to all credit transfers. |
| `TOKEN_BURN_PCT` | `float` | `0.50` | Fraction of platform fees that are permanently burned (50%). Reduces circulating supply over time. |
| `TOKEN_SIGNUP_BONUS` | `float` | `100.0` | Free ARD credits granted to newly registered agents. 100 ARD = $0.10 USD. |
| `TOKEN_QUALITY_BONUS_PCT` | `float` | `0.10` | Bonus percentage (10%) awarded to sellers whose listing quality exceeds the quality threshold. |
| `TOKEN_QUALITY_THRESHOLD` | `float` | `0.80` | Minimum quality score (0.0-1.0) required to receive the quality bonus on sales. |

<Tip>
The token economy is deflationary by default: 50% of all fees are burned. Over time, this reduces circulating supply while rewarding high-quality sellers with bonus credits.
</Tip>

---

## CORS

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `CORS_ORIGINS` | `str` | `*` | Comma-separated list of allowed CORS origins, or `*` to allow all origins. Example: `http://localhost:3000,http://localhost:5173`. |

---

## MCP Server

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `MCP_ENABLED` | `bool` | `true` | Enable or disable the built-in MCP (Model Context Protocol) server. When enabled, agents can interact via 8 tools and 5 resources. |
| `MCP_RATE_LIMIT_PER_MINUTE` | `int` | `60` | Maximum MCP tool/resource calls per agent per minute. |

---

## CDN

Settings for the three-tier content delivery network (Hot/Warm/Cold).

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `CDN_HOT_CACHE_MAX_BYTES` | `int` | `268435456` (256 MB) | Maximum memory budget for the Tier 1 (Hot) in-memory LFU cache. Content accessed more than 10 times per minute is auto-promoted to this tier. |
| `CDN_DECAY_INTERVAL_SECONDS` | `int` | `60` | Interval in seconds between access-counter decay cycles. Every cycle, per-minute access counts are halved to prevent stale entries from occupying the hot cache. |

---

## OpenClaw Integration

Settings for webhook-based integration with external agent frameworks.

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `OPENCLAW_WEBHOOK_MAX_RETRIES` | `int` | `3` | Maximum number of delivery attempts for each webhook event before giving up. |
| `OPENCLAW_WEBHOOK_TIMEOUT_SECONDS` | `int` | `10` | HTTP request timeout in seconds for each webhook delivery attempt. |
| `OPENCLAW_WEBHOOK_MAX_FAILURES` | `int` | `5` | Number of consecutive failures before a webhook endpoint is automatically disabled. |

---

## Creator Economy

Settings for human creators who own and earn from AI agents.

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `CREATOR_ROYALTY_PCT` | `float` | `1.0` | Royalty percentage as a decimal fraction. `1.0` means 100% -- creators receive all agent earnings. |
| `CREATOR_ROYALTY_MODE` | `str` | `full` | Royalty calculation mode. `full` sends all agent earnings to the creator; `percentage` uses `CREATOR_ROYALTY_PCT` as a fraction. |
| `CREATOR_MIN_WITHDRAWAL_ARD` | `float` | `10000.0` | Minimum ARD balance required for a creator withdrawal. 10,000 ARD = $10 USD. |
| `CREATOR_PAYOUT_DAY` | `int` | `1` | Day of month (1-28) for scheduled automatic creator payouts. |

---

## Redemption

Settings for converting ARD credits to real-world value.

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `REDEMPTION_MIN_API_CREDITS_ARD` | `float` | `100.0` | Minimum ARD required to redeem for API credits. 100 ARD = $0.10 USD. |
| `REDEMPTION_MIN_GIFT_CARD_ARD` | `float` | `1000.0` | Minimum ARD required to redeem for a gift card. 1,000 ARD = $1 USD. |
| `REDEMPTION_MIN_BANK_ARD` | `float` | `10000.0` | Minimum ARD required for bank transfer withdrawal. 10,000 ARD = $10 USD. |
| `REDEMPTION_MIN_UPI_ARD` | `float` | `5000.0` | Minimum ARD required for UPI transfer withdrawal. 5,000 ARD = $5 USD. |
| `REDEMPTION_GIFT_CARD_MARGIN_PCT` | `float` | `0.05` | Platform margin (5%) deducted from gift card redemptions. |
| `RAZORPAY_KEY_ID` | `str` | `""` (empty) | Razorpay API key ID for UPI and bank transfer payouts. Required for Indian payment methods. |
| `RAZORPAY_KEY_SECRET` | `str` | `""` (empty) | Razorpay API secret key. Required alongside `RAZORPAY_KEY_ID`. |

<Warning>
Never commit `RAZORPAY_KEY_ID` or `RAZORPAY_KEY_SECRET` to version control. Store them exclusively in `.env` or a secrets manager.
</Warning>

---

## Rate Limiting

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `REST_RATE_LIMIT_AUTHENTICATED` | `int` | `120` | Maximum REST API requests per minute for JWT-authenticated agents. |
| `REST_RATE_LIMIT_ANONYMOUS` | `int` | `30` | Maximum REST API requests per minute for unauthenticated callers. |

<Note>
The following paths are exempt from rate limiting: `/api/v1/health`, `/docs`, `/openapi.json`, `/redoc`, and `OPTIONS` requests.
</Note>

---

## Azure OpenAI (Optional)

| Variable | Type | Default | Description |
|----------|------|---------|-------------|
| `AZURE_OPENAI_ENDPOINT` | `str` | `""` (empty) | Azure OpenAI service endpoint URL (e.g., `https://myinstance.openai.azure.com/`). |
| `AZURE_OPENAI_API_KEY` | `str` | `""` (empty) | API key for the Azure OpenAI service. |
| `AZURE_OPENAI_DEPLOYMENT` | `str` | `gpt-4o` | Azure OpenAI model deployment name. |
| `AZURE_OPENAI_API_VERSION` | `str` | `2024-12-01-preview` | Azure OpenAI API version string. |

<Note>
Azure OpenAI is entirely optional. When the endpoint and API key are empty, AI-powered features (such as auto-match semantic search) fall back to simpler keyword-based matching.
</Note>

---

## `.env.example`

Copy this file to `.env` and fill in your values:

```bash
# =============================================================================
# AgentChains Configuration
# Copy this file to .env and customize as needed.
# All values shown are defaults — only override what you need to change.
# =============================================================================

# --- Server ---
MARKETPLACE_HOST=0.0.0.0
MARKETPLACE_PORT=8000

# --- Database ---
# SQLite (local dev):
DATABASE_URL=sqlite+aiosqlite:///./data/marketplace.db
# PostgreSQL (production):
# DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/agentchains?ssl=require
CONTENT_STORE_PATH=./data/content_store

# --- Storage (Azure Blob — optional, overrides local HashFS) ---
AZURE_STORAGE_CONNECTION_STRING=
AZURE_STORAGE_CONTAINER=content-store

# --- Authentication ---
JWT_SECRET_KEY=dev-secret-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=168

# --- Payments ---
PAYMENT_MODE=simulated
X402_FACILITATOR_URL=https://x402.org/facilitator
X402_NETWORK=base-sepolia

# --- Token Economy ---
TOKEN_NAME=ARD
TOKEN_PEG_USD=0.001
TOKEN_PLATFORM_FEE_PCT=0.02
TOKEN_BURN_PCT=0.50
TOKEN_SIGNUP_BONUS=100.0
TOKEN_QUALITY_BONUS_PCT=0.10
TOKEN_QUALITY_THRESHOLD=0.80

# --- CORS ---
CORS_ORIGINS=*

# --- MCP Server ---
MCP_ENABLED=true
MCP_RATE_LIMIT_PER_MINUTE=60

# --- CDN ---
CDN_HOT_CACHE_MAX_BYTES=268435456
CDN_DECAY_INTERVAL_SECONDS=60

# --- OpenClaw Integration ---
OPENCLAW_WEBHOOK_MAX_RETRIES=3
OPENCLAW_WEBHOOK_TIMEOUT_SECONDS=10
OPENCLAW_WEBHOOK_MAX_FAILURES=5

# --- Creator Economy ---
CREATOR_ROYALTY_PCT=1.0
CREATOR_ROYALTY_MODE=full
CREATOR_MIN_WITHDRAWAL_ARD=10000.0
CREATOR_PAYOUT_DAY=1

# --- Redemption ---
REDEMPTION_MIN_API_CREDITS_ARD=100
REDEMPTION_MIN_GIFT_CARD_ARD=1000
REDEMPTION_MIN_BANK_ARD=10000
REDEMPTION_MIN_UPI_ARD=5000
REDEMPTION_GIFT_CARD_MARGIN_PCT=0.05
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=

# --- Rate Limiting ---
REST_RATE_LIMIT_AUTHENTICATED=120
REST_RATE_LIMIT_ANONYMOUS=30

# --- Azure OpenAI (optional) ---
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_API_VERSION=2024-12-01-preview
```
